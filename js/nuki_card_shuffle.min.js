!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.AMD?define(factory):(global=global||self).NukiCardShuffle=factory()}(this,(function(){"use strict";class NukiCardShuffle{constructor(selector,options){const check=document.querySelector(".nuki-card-shuffle-container");if(null!=check)throw new Error("Only one class can exist.");const dom=document.querySelector(selector);if(!dom)throw new Error("can not find selector.");if(3!=options.length)throw new Error("options size is 3 only.");const top='\n        <div class="nuki-card-shuffle-container">\n          <ul class="nuki-card-shuffle-list">\n      ',formatReviewRate=input=>input<=.74?0:input>=.75&&input<=1.24?1:input>=1.25&&input<=1.74?1.5:input>=1.75&&input<=2.24?2:input>=2.25&&input<=2.74?2.5:input>=2.75&&input<=3.24?3:input>=3.25&&input<=3.74?3.5:input>=3.75&&input<=4.24?4:input>=4.25&&input<=4.74?4.5:5,li=options.map(option=>`\n          <li class="nuki-card-shuffle-card">\n            <a\n              href="${option.affiliateURL}"\n              target="_blank"\n            >\n              <div class="nuki-card-shuffle-media">\n                <img\n                  src="${option.imageURL_small}"\n                  alt="${option.title}"\n                >\n              </div>\n            </a>\n            <div class="nuki-card-shuffle-content">\n              <a\n                href="${option.affiliateURL}"\n                target="_blank"\n              >\n                ${option.title.substring(0,20)}...\n              </a>\n              <p class="nuki-card-shuffle-review">\n                <span data-rate="${formatReviewRate(option.review_average)}"></span>（${option.review_count}）\n              </p>\n              <p class="nuki-card-shuffle-button">\n                <button\n                  type="button"\n                  data-video="${option.sampleMovieURL_size_720_480}"\n                > > サンプル動画を再生する</button>\n              </p>\n            </div>\n          </li>\n        `).join(""),bottom='\n          </ul>\n        </div>\n        <div class="nuki-card-shuffle-modal">\n          <div class="nuki-card-shuffle-modal-content">\n            <span class="nuki-card-shuffle-modal-close">×</span>\n            <iframe\n              class="nuki-card-shuffle-modal-video"\n              src=""\n            ></iframe>\n          </div>\n        </div>\n      ';dom.innerHTML=top+li+bottom;const buttons=document.querySelectorAll(".nuki-card-shuffle-button button"),video=document.querySelector(".nuki-card-shuffle-modal-video"),modal=document.querySelector(".nuki-card-shuffle-modal"),close=document.querySelector(".nuki-card-shuffle-modal-close");buttons.forEach((function(e){e.addEventListener("click",()=>{video.src=e.dataset.video,modal.style.display="block"})})),close.addEventListener("click",()=>{video.src="",modal.style.display="none"}),addEventListener("click",e=>{e.target==modal&&(video.src="",modal.style.display="none")})}open(){const cards=document.querySelectorAll(".nuki-card-shuffle-card");cards.forEach((e,i)=>setTimeout(()=>e.classList.add(`ani${i}`),150*i))}close(){const cards=document.querySelectorAll(".nuki-card-shuffle-card");cards.forEach((e,i)=>setTimeout(()=>e.classList.remove(`ani${i}`),150*i))}toggle(){const cards=document.querySelectorAll(".nuki-card-shuffle-card");cards.forEach((e,i)=>setTimeout(()=>e.classList.toggle(`ani${i}`),150*i))}}return NukiCardShuffle}));